<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Модель приятного запаха</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  table { border-collapse: collapse; margin-bottom: 20px; }
  td, th { border: 1px solid #ccc; padding: 8px; text-align: center; }
  input { width: 60px; }
</style>
</head>
<body>

<h2>Оценка вероятности приятного запаха</h2>

<p>Введите концентрации для трёх молекул (от 0 до 1):</p>

<table>
  <tr>
    <th>Молекула</th><th>Концентрация (c)</th><th>Реакция рецепторов (R)</th>
  </tr>
  <tr><td>m1</td><td><input type="number" id="c1" min="0" max="1" step="0.01" value="0.3"></td><td>0.8</td></tr>
  <tr><td>m2</td><td><input type="number" id="c2" min="0" max="1" step="0.01" value="0.4"></td><td>0.6</td></tr>
  <tr><td>m3</td><td><input type="number" id="c3" min="0" max="1" step="0.01" value="0.2"></td><td>0.9</td></tr>
</table>

<button onclick="calculatePleasantness()">Рассчитать вероятность</button>

<p id="result"></p>

<script>
// Функция совместимости молекул S(m_i, m_j) — простая матрица совместимости
const compatibilityMatrix = [
  [1.0, 0.7, 0.4],
  [0.7, 1.0, 0.5],
  [0.4, 0.5, 1.0]
];

// Реакция рецепторов R(m_i)
const receptorResponse = [0.8, 0.6, 0.9];

// Основная функция расчёта вероятности приятного запаха
function calculatePleasantness() {
  // Считываем концентрации из input
  const c = [
    parseFloat(document.getElementById('c1').value) || 0,
    parseFloat(document.getElementById('c2').value) || 0,
    parseFloat(document.getElementById('c3').value) || 0
  ];

  let P = 0; // Инициализация вероятности

  // Двойной цикл по всем молекулам
  for (let i = 0; i < 3; i++) {
    for (let j = 0; j < 3; j++) {
      // Формула P += c_i * c_j * S(m_i, m_j) * (R(m_i)+R(m_j))/2
      P += c[i] * c[j] * compatibilityMatrix[i][j] * ((receptorResponse[i] + receptorResponse[j]) / 2);
    }
  }

  // Ограничиваем результат от 0 до 1
  P = Math.min(Math.max(P, 0), 1);

  // Вывод результата в процентах
  const percent = (P * 100).toFixed(1);

  document.getElementById('result').textContent = 
    `Вероятность приятного запаха: ${percent}%` + 
    (P > 0.4 ? " — запах приятен большинству!" : " — запах может быть не приятен большинству.");
}
</script>

</body>
</html>
